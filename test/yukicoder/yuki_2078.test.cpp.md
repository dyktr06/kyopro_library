---
data:
  _extendedDependsOn:
  - icon: ':heavy_check_mark:'
    path: lib/data_structure/convex_hull_trick.hpp
    title: Convex Hull Trick
  _extendedRequiredBy: []
  _extendedVerifiedWith: []
  _isVerificationFailed: false
  _pathExtension: cpp
  _verificationStatusIcon: ':heavy_check_mark:'
  attributes:
    '*NOT_SPECIAL_COMMENTS*': ''
    PROBLEM: https://yukicoder.me/problems/no/2078
    links:
    - https://yukicoder.me/problems/no/2078
  bundledCode: "#line 1 \"test/yukicoder/yuki_2078.test.cpp\"\n#define PROBLEM \"\
    https://yukicoder.me/problems/no/2078\"\n#include <bits/stdc++.h>\nusing namespace\
    \ std;\n\n#line 2 \"lib/data_structure/convex_hull_trick.hpp\"\n\n/**\n * @brief\
    \ Convex Hull Trick\n * @docs docs/data_structure/convex_hull_trick.md\n */\n\n\
    // ax + by + c = 0 -> y = -b/a x - c/a\ntemplate <typename T>\nstruct Line{\n\
    \    T a, b, c;\n    Line(T A = 0, T B = 0, T C = 0) : a(A), b(B), c(C) {}\n \
    \   // \u50BE\u304D\n    inline bool operator<(const Line &other) const {\n  \
    \      return -a * other.b < -other.a * b;\n    }\n    inline bool operator>(const\
    \ Line &other) const {\n        return -a * other.b > -other.a * b;\n    }\n \
    \   inline bool operator<=(const Line &other) const {\n        return -a * other.b\
    \ <= -other.a * b;\n    }\n    inline bool operator>=(const Line &other) const\
    \ {\n        return -a * other.b >= -other.a * b;\n    }\n};\n\ntemplate <typename\
    \ T>\nstruct ConvexHullTrick{\n    deque<Line<T>> deq;\n\n    ConvexHullTrick()\
    \ : deq(){\n    }\n\n    bool check(Line<T> l1, Line<T> l2, Line<T> l3){\n   \
    \     T a = ((-l3.c * l2.b) - (-l2.c * l3.b)) * ((-l2.a * l1.b) - (-l1.a * l2.b));\n\
    \        T b = ((-l2.c * l1.b) - (-l1.c * l2.b)) * ((-l3.a * l2.b) - (-l2.a *\
    \ l3.b));\n        return a >= b;\n    }\n\n    // l1(x) < l2(x)\n    bool comp(Line<T>\
    \ l1, Line<T> l2, T x){\n        // -(ax + c)/b < -(dx + f)/e\n        return\
    \ -(l1.a * x + l1.c) * l2.b < -(l2.a * x + l2.c) * l1.b;\n    };\n\n    // first/second\n\
    \    pair<T, T> f(Line<T> l, T x){\n        T a = -l.a * x - l.c;\n        T b\
    \ = l.b;\n        if(b < 0) a *= -1, b *= -1;\n        return make_pair(a, b);\n\
    \    };\n\n    // y = ax + b\n    void add(T a, T b){\n        Line<T> p(a, -1,\
    \ b);\n        while((int) deq.size() >= 2 && check(deq.at((int) deq.size() -\
    \ 2), deq.at((int) deq.size() - 1), p)){\n            deq.pop_back();\n      \
    \  }\n        deq.push_back(p);\n    }\n\n    // ax + by + c = 0\n    void add(T\
    \ a, T b, T c){\n        Line<T> p(a, b, c);\n        while((int) deq.size() >=\
    \ 2 && check(deq.at((int) deq.size() - 2), deq.at((int) deq.size() - 1), p)){\n\
    \            deq.pop_back();\n        }\n        deq.push_back(p);\n    }\n\n\
    \    pair<T, T> query(T x){\n        while((int) deq.size() >= 2 && !comp(deq.at(0),\
    \ deq.at(1), x)){\n            deq.pop_front();\n        }\n        return f(deq.at(0),\
    \ x);\n    }\n};\n#line 6 \"test/yukicoder/yuki_2078.test.cpp\"\n\nint main(){\n\
    \    int t; cin >> t;\n    while(t--){\n        long long x, a; cin >> x >> a;\n\
    \        vector<long long> dp(a + 1, 1LL << 60);\n        dp[0] = 0;\n       \
    \ ConvexHullTrick<long long> CHT;\n        for(long long i = 0; i <= a; i++){\n\
    \            if(i >= 1){\n                dp[i] = min(dp[i], CHT.query(i).first\
    \ + i * i + x);\n            }\n            CHT.add(-2 * i, i * i + dp[i]);\n\
    \        }\n        cout << dp[a] << \"\\n\";\n    }\n}\n"
  code: "#define PROBLEM \"https://yukicoder.me/problems/no/2078\"\n#include <bits/stdc++.h>\n\
    using namespace std;\n\n#include \"../../lib/data_structure/convex_hull_trick.hpp\"\
    \n\nint main(){\n    int t; cin >> t;\n    while(t--){\n        long long x, a;\
    \ cin >> x >> a;\n        vector<long long> dp(a + 1, 1LL << 60);\n        dp[0]\
    \ = 0;\n        ConvexHullTrick<long long> CHT;\n        for(long long i = 0;\
    \ i <= a; i++){\n            if(i >= 1){\n                dp[i] = min(dp[i], CHT.query(i).first\
    \ + i * i + x);\n            }\n            CHT.add(-2 * i, i * i + dp[i]);\n\
    \        }\n        cout << dp[a] << \"\\n\";\n    }\n}\n"
  dependsOn:
  - lib/data_structure/convex_hull_trick.hpp
  isVerificationFile: true
  path: test/yukicoder/yuki_2078.test.cpp
  requiredBy: []
  timestamp: '2024-09-23 06:50:28+09:00'
  verificationStatus: TEST_ACCEPTED
  verifiedWith: []
documentation_of: test/yukicoder/yuki_2078.test.cpp
layout: document
redirect_from:
- /verify/test/yukicoder/yuki_2078.test.cpp
- /verify/test/yukicoder/yuki_2078.test.cpp.html
title: test/yukicoder/yuki_2078.test.cpp
---
